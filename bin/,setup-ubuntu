#!/bin/bash

set -e

# Always use "aptitude" since "apt-get" cannot remember later which
# packages I asked for, versus which are sitting around because they
# were dependencies of some other package that was once installed.
# Aptitude knows the difference, and will remove the latter!

if ! which aptitude
then sudo apt-get install aptitude
fi

sudo aptitude update

# Install happy packages.

sudo aptitude install -y \
    apache2-utils    `: provides 12 commands, especially "ab"` \
    apt-file         `: to find where files come from` \
    autocutsel       `: unifies the X Windows clipboard and selection` \
    cabextract       `: for extracting binary Windows drivers ` \
    chromium-browser `: browser-of-choice` \
    colordiff wdiff  `: for the occasional need to diff outside of git ` \
    emacs24          `: editor-of-choice` \
    emacs24-el       `: readable LISP source` \
    fvwm             `: window manager` \
    fonts-sil-gentium `: font for presentation slides` \
    git gitk         `: distributed version control` \
    gnucash          `: accounting` \
    gnumeric         `: spreadsheet` \
    groff            `: for processing old documents` \
    gscan2pdf pdftk  `: scanning to PDF` \
    inkscape         `: SVG editing` \
    inotify-tools    `: for waiting on files to change` \
    libreoffice-writer `: for the occasional Microsoft Word file ` \
    mplayer2 geeqie  `: for media` \
    openssh-server   `: for when I run scp on another machine` \
    pwgen            `: random passwords` \
    pypy             `: for when I want to be fast` \
    python3 python3-dev `: for when I feel modern` \
    python-dev       `: necessity` \
    idle-python2.7   `: for showing IDLE and turtle to newcomers` \
    rdesktop         `: for accessing Windows machines in the cloud` \
    redshift         `: for coding past sunset` \
    s3cmd            `: the cloud` \
    sqlite3          `: for command line access to its databases` \
    subversion       `: for outdated projects` \
    texlive-latex-recommended `: for building PDF documentation with Sphinx` \
    texlive-latex-extra \
    texlive-fonts-recommended \
    tmux             `: to leave things running in a tty overnight` \
    tree             `: for when ls is simply not enough` \
    ttf-inconsolata  `: favorite console font` \
    ttf-mscorefonts-installer `: for browsing the web` \
    units            `: desk calculator` \
    whois            `: for searching the domain name registries` \
    wireshark        `: primarily for debugging TCP` \
    xchat            `: IRC for software support` \
    zsh              `: favorite shell` \
    \
    `: Mount remote filesystems` \
    bindfs encfs smbnetfs sshfs \
    \
    `: Python modules I would rather not always compile myself` \
    ipython python-cssselect ipython-notebook python-matplotlib \
    python-imaging python-lxml python-scipy python3-imaging python3-scipy \
    \
    `: for building matplotlib myself in case I need recent features` \
    libfreetype6-dev libpng12-dev \
    \
    `: for building tools like ag and ledger` \
    automake libpcre3-dev \
    \
    `: for gevent` \
    libevent1-dev \
    \
    `: for ledger` \
    cmake libboost-all-dev libgmp-dev libmpfr-dev \
    \
    `: for lxml` \
    libxml2-dev libxslt1-dev \
    \
    `: for SASS and Compass` \
    librb-inotify-ruby \
    \
    `: for Skype` \
    libqt4-dbus libqtwebkit4 \
    \
    `: further tools for web development` \
    redis-server yui-compressor \
    \
    `: Hettinger reminded me how awesome these tools are` \
    graphviz python-blockdiag python-seqdiag python-actdiag python-nwdiag

# Run "apt-file update" for the first time if necessary.

if ! ls /var/cache/apt/apt-file | grep -q .
then
    sudo apt-file update
fi

# Thwart Unity by moving menus back into their application windows.

#sudo aptitude purge -y appmenu-gtk indicator-applet-appmenu indicator-appmenu
